【古代妇女三从四德案例】
未嫁从父、既嫁从父夫、夫死从子
IHandler是三个有决策权对象的接口

section1的问题：
①职责界定不清晰；
    女儿提出的请求，应在父类中做出决定，而不是在Client类中进行组装。
②代码臃肿；
    在Client中写了if...else，随着请示人员类型增多，臃肿的条件判断可读性下降。
③耦合过重；
    要根据women的type来决定使用IHandler的哪个实现类，若IHandler实现类继续扩展，要修改Client类，违背开闭原则。
④异常情况欠考虑。
    若妻子不懂三从四德，要向自己的父亲请示，逻辑则会失败。

section2优化：
    可抽象出一个结构：女性的请求先发送到父亲类，若女儿已出嫁，则转发给女婿，若女婿over，则转发给儿子。
    由谁处理女性提出的请求，都已转移到了Handler抽象类。
    该类也用到了模板方法模式（判断请求的级别和当前能够处理的级别）
    这就是责任链模式。

【定义】
使多个对象都有机会处理请求，从而避免请求的发送者和接受者之间的耦合关系。
将 这些对象连成一条链，并沿着这条链传递该请求，直到有对象处理它为止。

责任链重点在“链”上，由一条链去处理相似的请求在链中决定谁来处理这个请求。
参看section3。

抽象处理者实现三个职责：
①handlerMessage定义请求处理；
②链的编排，setNext设置下个处理者；
③具体请求者必须实现的两方法：getHandlerLevel和echo。

实际应用：一般会对责任模式进行封装，替代Client类，具体链的设置不需高层次模块关系。
	      简化高层次模块调用，减少模块间耦合，提高系统灵活性。

【优点】
将请求和处理分开。请求可不知谁处理，处理者可不知请求全貌。两者解耦，提高系统灵活性。

【缺点】
①性能问题（每个请求都从链头遍历到链尾，特别是链较长时，性能是大问题）
②调试不便（链条较长，环节较多时，采用类似递归方式，调试逻辑较复杂）

【注意事项】
链中节点数需控制，避免超长链。
一般在Handler设置一个最大节点数量，在setNext判断是否超阈值。
超过则不允许该链建立，避免破坏系统性能。

【最佳实践】
Handler是抽象类，融合模板方法模式，每个实现类只需实现getHandlerLevel和echo方法。
各个实现类只需关注自己的业务逻辑，而父类实现请求传递，子类实现请求处理。
符合单一职职责。

责任链模式核心：请求可不知谁处理，处理者可不知请求全貌。

同时责任链模式也可作为一种"补救模式"。
eg.一个请求（银行客户存款的币种），一个处理者（只处理人民币）。
而随着业务发展，还要处理美元、日元……
这时可用责任链模式，不大幅改变原有业务逻辑，通过扩展实现类能很好解决需求变更。

【案例】
注册用户分两类：一种是VIP（在该单位办过业务的，注册多了一串VIP序列号），一种是普通用户（注册填一堆信息）。
注册后激活，流程不同：VIP自动发送邮箱，普通用户要发短信（做广告）。
甭管是注册哪种用户，统一传递到一个处理入口，通过责任链完成任务处理。
